{% extends 'base.html' %}

{% block title %}Authors - Library App{% endblock %}

{% block content %}
<h1 class="mb-4">ğŸ‘¨â€ğŸ¨ Authors</h1>

<div class="row" id="author-list">
    <!-- AquÃ­ se llenarÃ¡n los autores con JavaScript -->
</div>

<script>
    // Hacer una solicitud AJAX para obtener los autores
    fetch('/api/authors')
        .then(response => response.json())
        .then(data => {
            const authorListContainer = document.getElementById('author-list');
            
            if (data.length === 0) {
                authorListContainer.innerHTML = `
                    <div class="col-12">
                        <div class="alert alert-info">
                            <i class="bi bi-info-circle"></i> No authors available yet. ğŸ“­
                        </div>
                    </div>
                `;
            } else {
                // Iterar sobre los autores y aÃ±adirlos al DOM
                data.forEach(author => {
                    const authorCard = `
                        <div class="col-md-4 mb-4">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h5 class="card-title">${author.name} âœï¸</h5>
                                    ${author.birth_date ? `<p class="card-text"><small class="text-muted">Born: ${author.birth_date} ğŸ‚</small></p>` : ''}
                                    <p class="card-text">${author.biography.length > 100 ? author.biography.substring(0, 100) + '...' : author.biography}</p>
                                    <a href="/authors/${author.id}/" class="btn btn-primary">View Details ğŸ‘€</a>
                                </div>
                            </div>
                        </div>
                    `;
                    authorListContainer.innerHTML += authorCard;
                });
            }
        })
        .catch(error => {
            console.error('Error fetching authors:', error);
        });
</script>
{% endblock %}
